2026-01-27 14:49:08,654 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dctdev.test.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/1, headers={'trialauth': 'test_token'}
2026-01-27 14:49:08,679 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dctdev.test.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/1, headers={'trialauth': 'test_token'}
2026-01-27 14:49:08,694 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dctdev.test.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/1, headers={'trialauth': 'test_token'}
2026-01-27 14:49:08,707 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dct.test.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/2, headers={'trialauth': 'test_token'}
2026-01-27 14:49:08,721 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dctstage.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/2, headers={'trialauth': 'test_token'}
2026-01-27 14:49:08,736 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dct.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/2, headers={'trialauth': 'test_token'}
2026-01-27 14:49:08,750 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dctdev.test.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/2, headers={'trialauth': 'test_token'}
2026-01-27 14:49:08,765 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dctdev.test.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/3, headers={'trialauth': 'test_token'}
2026-01-27 14:50:03,154 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dctdev.test.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/1, headers={'trialauth': 'test_token'}
2026-01-27 14:50:03,236 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dctdev.test.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/1, headers={'trialauth': 'test_token'}
2026-01-27 14:50:03,291 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dctdev.test.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/1, headers={'trialauth': 'test_token'}
2026-01-27 14:50:03,348 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dct.test.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/2, headers={'trialauth': 'test_token'}
2026-01-27 14:50:03,397 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dctstage.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/2, headers={'trialauth': 'test_token'}
2026-01-27 14:50:03,446 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dct.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/2, headers={'trialauth': 'test_token'}
2026-01-27 14:50:03,628 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dctdev.test.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/2, headers={'trialauth': 'test_token'}
2026-01-27 14:50:03,681 - INFO - get_info_from_dct - patient_id=patient123 - get_info_from_dct 请求详情: method=GET, url=https://dctdev.test.trialdata.cn/api/Patient/Chat/PatientBaseInfo/patient123/3, headers={'trialauth': 'test_token'}
2026-01-27 17:19:08,298 - INFO - upload_chat_history - test_upload_chat_history - upload_chat_history 请求详情: method=PUT, url=https://dct.test.trialdata.cn/api/Patient/Chat/AiChatLogByPy, headers={'trialauth': '2d53b75f-9da3-495b-8a96-fd332ea292cc', 'Content-Type': 'application/json'}, payload={"dctPatientId": "000648f5-de75-6d79-0000-000000000000", "sendUser": "assistant", "chatContent": "", "chatLogId": "6305ec9e-a0f3-4092-b41d-b40c446173a9", "form_entry_res": {"content": "hello"}}
2026-01-27 17:19:08,531 - ERROR - upload_chat_history - test_upload_chat_history - chat_history 上传失败: status=400, body={"code":1,"message":"Error converting value \"hello\" to type 'System.Collections.Generic.List`1[TrialData.EDCT.ViewModels.Patient.AICRC.ContentItem]'. Path 'form_entry_res.content', line 1, position 191.","detail":"Error converting value \"hello\" to type 'System.Collections.Generic.List`1[TrialData.EDCT.ViewModels.Patient.AICRC.ContentItem]'. Path 'form_entry_res.content', line 1, position 191.","errors":{}}
2026-01-27 17:20:15,427 - INFO - upload_chat_history - test_upload_chat_history - upload_chat_history 请求详情: method=PUT, url=https://dct.test.trialdata.cn/api/Patient/Chat/AiChatLogByPy, headers={'trialauth': '2d53b75f-9da3-495b-8a96-fd332ea292cc', 'Content-Type': 'application/json'}, payload={"dctPatientId": "000648f5-de75-6d79-0000-000000000000", "sendUser": "assistant", "chatContent": "", "chatLogId": "6305ec9e-a0f3-4092-b41d-b40c446173a9", "form_entry_res": {"content": [{"id": "rs_02176950526825000000000000000000000ffffac1518583b7a43", "type": "reasoning", "status": "in_progress", "index": 0, "summary": [{"index": 0, "type": "summary_text", "text": "\u7528\u6237\u95ee\u51e0\u70b9\u4e86\uff0c\u5c5e\u4e8e\u65f6\u95f4\u67e5\u8be2\uff0c\u4f46\u6839\u636e\u7cfb\u7edf\u63d0\u793a\uff0c\u6211\u9700\u8981\u5224\u65ad\u662f\u5426\u5c5e\u4e8e\u8bd5\u9a8c\u76f8\u5173\u3002\u7528\u6237\u7684\u95ee\u9898\u662f\u201c\u51e0\u70b9\u4e86\u201d\uff0c\u8fd9\u662f\u5f53\u524d\u65f6\u95f4\u7684\u67e5\u8be2\uff0c\u4e0d\u5c5e\u4e8e\u4e34\u5e8a\u8bd5\u9a8c\u76f8\u5173\u5185\u5bb9\u3002\u6839\u636e\u5bf9\u8bdd\u8fb9\u754c\uff0c\u5e94\u8be5\u62d2\u7edd\u56de\u7b54\u5e76\u5f15\u5bfc\u56de\u8bd5\u9a8c\u672c\u8eab\u3002\u9700\u8981\u6309\u7167\u6807\u51c6\u56de\u590d\u5efa\u8bae\u6765\u5904\u7406\uff0c\u8bf4\u660e\u53ea\u80fd\u534f\u52a9\u8bd5\u9a8c\u76f8\u5173\u4e8b\u5b9c\uff0c\u5176\u4ed6\u8bdd\u9898\u8bf7\u54a8\u8be2\u4e13\u4e1a\u6e20\u9053\u3002"}]}, {"type": "text", "text": "\u62b1\u6b49\uff0c\u4f5c\u4e3a**\u4e34\u7814\u5c0f\u52a9\u624b**\uff0c\u6211\u4ec5\u80fd\u534f\u52a9\u60a8\u5904\u7406\u4e0e\u672c\u4e34\u5e8a\u8bd5\u9a8c\u76f8\u5173\u7684\u4e8b\u5b9c\u3002\u5173\u4e8e\u5176\u4ed6\u8bdd\u9898\uff0c\u5efa\u8bae\u60a8\u54a8\u8be2\u76f8\u5173\u4e13\u4e1a\u6e20\u9053\u3002", "index": 1, "id": "msg_02176950527036500000000000000000000ffffac1518585e92b5"}], "additional_kwargs": {}, "response_metadata": {"model_provider": "openai", "id": "resp_021769505266597013359aa4be1d50f017ce693675296f179fea4", "created_at": 1769505268.0, "model": "doubao-seed-1-8-251228", "object": "response", "service_tier": "default", "status": "completed", "model_name": "doubao-seed-1-8-251228"}, "type": "ai", "name": null, "id": "resp_021769505266597013359aa4be1d50f017ce693675296f179fea4", "tool_calls": [], "invalid_tool_calls": [], "usage_metadata": {"input_tokens": 2952, "output_tokens": 112, "total_tokens": 3064, "input_token_details": {"cache_read": 0}, "output_token_details": {"reasoning": 78}}}}
2026-01-27 17:20:15,612 - INFO - upload_chat_history - test_upload_chat_history - chat_history 上传成功: false
